<!doctype html>
<html lang="zxx">

<head>
    <!--========= Required meta tags =========-->
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="keywords" content="digital solutions, web development, app design, branding, digital marketing, creative solutions, business transformation">

    <title>Usman M - Freelancer</title>

    <link rel="shortcut icon" href="assets/img/fav.webp" type="images/x-icon"/>
    <!-- css include -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/fontawesome.css">
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/css/swiper.min.css">
    <link rel="stylesheet" href="assets/css/odometer.css">
    <link rel="stylesheet" href="assets/css/imageRevealHover.css">
    <link rel="stylesheet" href="assets/css/jquery-ui.min.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <link rel="stylesheet" href="assets/css/main.css">
</head>

<body>

<!-- backtotop - start -->
<div class="xb-backtotop">
    <a href="#" class="scroll">
        <i class="far fa-arrow-up"></i>
    </a>
</div>
<!-- backtotop - end -->

<!-- preloader start -->
<div id="xb-loadding" class="xb-loadding-container">
    <div class="xb-loader">
        <div class="xb-loadding-inner">
            <img src="assets/img/logo/logo-a.webp" alt="">
         </div>
    </div>
</div>
<!-- preloader end -->

<!-- line start -->
<div class="container">
    <div class="line_wrap">
        <div class="xb-line"></div>
    </div>
</div>
<!-- line end -->


<div class="body_wrap">

    <!-- header start -->
    <header id="xb-header-area" class="header-area header-style-one is-sticky">
        <div class="xb-header">
            <div class="container">
                <div class="header__wrap ul_li_between">
                    <div class="header-logo">
                        <a href="index.html"><img src="assets/img/logo/logo.webp" alt=""></a>
                    </div>
                    <div class="main-menu__wrap ul_li navbar navbar-expand-lg">
                        <nav class="main-menu collapse navbar-collapse">
                            <ul>
                                <li>
                                    <a href="index.html"><span>Home</span></a>
                                </li>
                                <li>
                                    <a href="service.html"><span>Services</span></a>
                                </li>
                                <li>
                                    <a href="project.html"><span>Portfolio</span></a>
                                </li>
                                <li>
                                    <a href="packages.html"><span>Packages</span></a>
                                </li>
                                <a href="booking.html" class="thm-btn thm-btn--anim">
                                    <span class="btn-shape"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 168 53" fill="none" preserveAspectRatio="none">
                                        <path d="M4.0981 4.86337C4.64282 2.03999 7.11401 0 9.98946 0H158.884C161.85 0 164.371 2.1678 164.816 5.10073L167.284 21.379C167.759 24.5119 167.766 27.6981 167.304 30.8331L164.797 47.8734C164.364 50.818 161.837 53 158.861 53H10.0172C7.12933 53 4.65118 50.9428 4.11965 48.1044L1.11963 32.0835C0.379833 28.1329 0.390937 24.0782 1.15236 20.1316L4.0981 4.86337Z" fill="#C4EF17"/>
                                      </svg>
                                    </span>
                                    <div class="btn-anim-wrap">
                                        <span class="button-text">Book Consultation</span>
                                        <span class="button-text">Book Consultation</span>
                                    </div>
                                </a>                        
                            </ul>
                        </nav>

                        <!-- Mobile overlay menu -->
                        <div class="xb-header-wrap">
                            <div class="xb-header-menu">
                                <div class="xb-header-menu-scroll">
                                    <div class="xb-menu-close xb-hide-xl xb-close"></div>
                                    <div class="xb-logo-mobile xb-hide-xl">
                                        <a href="index.html" rel="home"><img src="assets/img/logo/logo.webp" alt=""></a>
                                    </div>
                                    <div class="xb-header-mobile-search xb-hide-xl">
                                        <form >
                                            <!-- <input type="text" placeholder="Search..." name="s" class="search-field"> -->
                                        </form>
                                    </div>
                                    <nav class="xb-header-nav">
                                        <ul class="xb-menu-primary clearfix">
                                            <li class="menu-item">
                                                <a href="index.html"><span>Home</span></a>
                                            </li>
                                            <li class="menu-item">
                                                <a href="service.html"><span>Services</span></a>
                                            </li>
                                            <li class="menu-item">
                                                <a href="project.html"><span>Portfolio</span></a>
                                            </li>
                                            <li class="menu-item">
                                                <a href="packages.html"><span>Packages</span></a>
                                            </li>
                                            <li class="menu-item active">
                                                <a href="booking.html"><span>Book Consultation</span></a>
                                            </li>
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                            <div class="xb-header-menu-backdrop"></div>
                        </div>
                    </div>

                    <div class="side-menu d-none d-lg-block">
                        <a class="burger-menu" href="javascript:void(0);">
                            <img src="assets/img/icon/category.svg" alt="">
                        </a>
                    </div>
                    <div class="header-bar-mobile side-menu d-lg-none">
                        <a class="xb-nav-mobile" href="javascript:void(0);"><img src="assets/img/icon/category.svg" alt=""></a>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- header end -->

    <!-- overlay menu start -->
    <div class="overlay-menu">
        <div class="close">
            <div class="xb-close"></div>
        </div>
        <div class="row overlay-wrap">
            <div class="col-xl-8 col-md-7 left-area">
                <nav>
                    <ul>
                        <li class="">
                            <a href="index.html"><span>Home</span></a>
                        </li>
                        <li>
                            <a href="service.html"><span>Services</span></a>
                        </li>
                        <li>
                            <a href="project.html"><span>Portfolio</span></a>
                        </li>
                        <li>
                            <a href="packages.html"><span>Packages</span></a>
                        </li>
                        <li>
                            <a href="booking.html"><span>Booking</span></a>
                        </li>
                    </ul> 
                </nav> 
            </div>
            <div class="col-xl-4 col-md-5 right-area">
                <ul>
                    <li><span class="title">Email</span></li>
                    <li>usman.se46@gmail.com</li>
                    <li></li>
                </ul>
                <ul>
                    <li><span class="title">Tel / Whats App</span></li>
                    <li>+44 742 841 1517 </li>
                </ul>
            </div>
        </div>
    </div>
    <!-- overlay menu end -->

    <!-- main area start  -->
    <main>
        <!-- breadcrumb start  -->
        <section class="breadcrumb pt-105 pb-90">
            <div class="container">
                <div class="breadcrumb__content text-center">
                    <h2 class="breadcrumb__title">Booking Page</h2>
                    <ul class="breadcrumb__list">
                        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                        <li class="breadcrumb-item">Booking</li>
                    </ul>
                </div>
            </div>
        </section>
        <!-- breadcrumb end  -->

        <!-- contact start -->
        <section class="pt-110 pb-180">
            <div class="container">
                    <!-- <div class="section-title contact-title mb-35">
                        <span class="sub-title">
                            Share your creative ideas with us, and 
                            receive designs that captivate, impress, 
                            and truly engage your audience.
                        </span>
                    </div> -->
                    <div class="contact-form-inner">
                        <form id="bookingForm" class="contact-form pos-rel">
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="xb-item--field">
                                        <label for="availableSlots">Available Slots: *</label>
                                        <select id="availableSlots" name="slot" required></select>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="xb-item--field">
                                        <label for="name">Name: *</label>
                                        <input type="text" id="name" name="name" placeholder="John Doe" required>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="xb-item--field">
                                        <label for="email">Email: *</label>
                                        <input type="email" id="email" name="email" placeholder="John@Doe.com" required>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="xb-item--field">
                                        <label for="phone">Phone Number: *</label>
                                        <input type="tel" id="phone" name="phone" placeholder="+44 0102 0304057" required>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="xb-item--field">
                                        <label for="notes">Notes/Agenda:</label>
                                        <textarea id="notes" name="notes" cols="30" rows="10" placeholder="Agenda of booking"></textarea>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div style="border-bottom: none;" class="xb-item--field">
                                        <input type="hidden" id="userTimeZone" name="userTimeZone">
                                        <div class="g-recaptcha" data-sitekey="6LeOdv0qAAAAAMrEJ8wqYEP1ZK5BFR9lvjm9I6ZW"></div>
                                        

                                        <div id="loadingSpinner" class="loader xb-loadding-container">
                                            <div class="xb-loader">
                                                <div class="xb-loadding-inner">
                                                    <img src="assets/img/logo/logo-a.webp" alt="">
                                                 </div>
                                            </div>
                                        </div>
                                        <!-- <div class="loader" id="loadingSpinner"></div> -->
                                        
                                        <button style="background: none;" type="submit" class="thm-btn thm-btn--anim mt-30">
                                            <span class="btn-shape"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 168 53" fill="none" preserveAspectRatio="none">
                                                <path d="M4.0981 4.86337C4.64282 2.03999 7.11401 0 9.98946 0H158.884C161.85 0 164.371 2.1678 164.816 5.10073L167.284 21.379C167.759 24.5119 167.766 27.6981 167.304 30.8331L164.797 47.8734C164.364 50.818 161.837 53 158.861 53H10.0172C7.12933 53 4.65118 50.9428 4.11965 48.1044L1.11963 32.0835C0.379833 28.1329 0.390937 24.0782 1.15236 20.1316L4.0981 4.86337Z" fill="#C4EF17"/>
                                              </svg>
                                            </span>
                                            <div class="btn-anim-wrap">
                                                <span class="button-text">Let’s Book <img src="assets/img/icon/arrow-up.svg" alt=""></span>
                                                <span class="button-text">Let’s Book <img src="assets/img/icon/arrow-up.svg" alt=""></span>
                                            </div>
                                        </button>

                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
            </div>
        </section>
        <!-- contact end -->
    </main>
    <!-- main area end  -->
</div>
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
<script>
    // const scriptURL = "https://script.google.com/macros/s/AKfycbx9yPnYYK5lYef2we1Du6Ul4QFOX6RPMYcpZY7CNbW4Thi_9LoR70WIVAjU19AH1zg3/exec";
    const scriptURL = "https://form.usman-m.com/api/booking";

    // Get user's timezone
    document.getElementById("userTimeZone").value = Intl.DateTimeFormat().resolvedOptions().timeZone;

    // Show loading spinner
    function showLoading() {
        document.getElementById("loadingSpinner").style.display = "inline-block";
    }

    // Hide loading spinner
    function hideLoading() {
        document.getElementById("loadingSpinner").style.display = "none";
    }

    // Format date in UK time with AM/PM
    function formatUKTime(date) {
        return date.toLocaleString("en-GB", {
            timeZone: "Europe/London",
            weekday: "long",
            year: "numeric",
            month: "long",
            day: "numeric",
            hour: "numeric",
            minute: "2-digit",
            hour12: true
        }) + " UK time";
    }

    // Fetch available slots
    async function fetchSlots() {
        showLoading();
        try {
            let response = await fetch(scriptURL + "?action=getSlots");
            let data = await response.json();

            let dropdown = document.getElementById("availableSlots");
            dropdown.innerHTML = "";

            if (data.slots.length > 0) {
                data.slots.forEach(slot => {
                    let option = document.createElement("option");
                    option.value = slot; // Store raw ISO string
                    option.textContent = formatUKTime(new Date(slot)); // Display in UK time
                    dropdown.appendChild(option);
                });
            } else {
                dropdown.innerHTML = "<option>No slots available</option>";
            }
        } catch (error) {
            console.error("Error fetching slots:", error);
            dropdown.innerHTML = "<option>Error loading slots</option>";
        } finally {
            hideLoading();
        }
    }

    // Fetch existing bookings
    async function fetchBookings() {
        showLoading();
        try {
            let response = await fetch(scriptURL + "?action=getBookings");
            let data = await response.json();

            let tableBody = document.getElementById("bookingsTable").getElementsByTagName("tbody")[0];
            tableBody.innerHTML = "";

            if (data.bookings.length > 0) {
                data.bookings.forEach(booking => {
                    let row = tableBody.insertRow();
                    row.insertCell().textContent = booking.name;
                    row.insertCell().textContent = formatUKTime(new Date(booking.slot)); // Display in UK time
                });
            } else {
                tableBody.innerHTML = "<tr><td colspan='2'>No bookings found</td></tr>";
            }
        } catch (error) {
            console.error("Error fetching bookings:", error);
            tableBody.innerHTML = "<tr><td colspan='2'>Error loading bookings</td></tr>";
        } finally {
            hideLoading();
        }
    }

    // Initial fetch
    fetchSlots();
    fetchBookings();

    // Handle form submission

document.getElementById("bookingForm").addEventListener("submit", async function(event) {
    event.preventDefault();
    const recaptchaResponse = grecaptcha.getResponse();
    if (!recaptchaResponse) {
        alert("Please complete the CAPTCHA.");
        return;
    }

    showLoading();
    let formData = new FormData(event.target);
    formData.append("g-recaptcha-response", recaptchaResponse);

    try {
        // let response = await fetch(scriptURL, { method: "POST", body: formData });
        let response = await fetch(scriptURL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formObj)
        });
        let data = await response.json();

        if (data.error) {
            alert("Error: " + data.error);
        } else {
            window.location.href = data.thankYouPageUrl; // Redirect to Thank You page
        }
    } catch (error) {
        console.error("Error submitting booking:", error);
        alert("Booking failed. Try again.");
    } finally {
        hideLoading();
        grecaptcha.reset(); // Reset CAPTCHA
    }
});
</script>

<!-- jquery include -->
<script src="assets/js/jquery-3.7.1.min.js"></script>
<script src="assets/js/bootstrap.bundle.min.js"></script>
<script src="assets/js/swiper.min.js"></script>
<script src="assets/js/wow.min.js"></script>
<script src="assets/js/gsap.min.js"></script>
<script src="assets/js/ScrollSmoother.min.js"></script>
<script src="assets/js/ScrollTrigger.min.js"></script>
<script src="assets/js/SplitText.min.js"></script>
<script src="assets/js/appear.js"></script>
<script src="assets/js/odometer.min.js"></script>
<script src="assets/js/imagesloaded.pkgd.min.js"></script>
<script src="assets/js/jquery.marquee.min.js"></script>
<script src="assets/js/isotope.pkgd.min.js"></script>
<script src="assets/js/jquery.magnific-popup.min.js"></script>
<script src="assets/js/touchspin.js"></script>
<script src="assets/js/jquery-ui.min.js"></script>
<script src="assets/js/imageRevealHover.js"></script>
<script src="assets/js/TweenMax.min.js"></script>
<script src="assets/js/parallax-scroll.js"></script>
<script src="assets/js/easing.min.js"></script>
<script src="assets/js/scrollspy.js"></script>
<script src="assets/js/ukiyo.min.js"></script>
<script src="assets/js/lenis.js"></script>
<script src="assets/js/moment.min.js"></script>
<script src="assets/js/main.js"></script>
<script src="assets/js/form-validation.js"></script>
<script src="assets/js/form-whatsapp.js"></script>

</body>

</html>
